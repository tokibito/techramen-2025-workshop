# 演習問題

ここまで学習した内容を実践する演習問題です。各問題を解いて、SQLの理解を深めましょう。

## 演習の進め方

1. まず自分で考えてクエリを書いてみる
2. pgAdminで実行して結果を確認する
3. うまくいかない場合は、ヒントを参考にする
4. 最後に解答例と比較する

## 基礎編の演習

### 問題1: 特定クラスの生徒一覧
1年1組の生徒を学籍番号順に表示してください。表示項目：学籍番号、姓名、性別

**ヒント**: JOINとWHERE句を使います

### 問題2: 高得点者の抽出
1学期中間テストで、いずれかの科目で90点以上を取った生徒の名前と科目、点数を表示してください。

**ヒント**: 複数のJOINが必要です

### 問題3: 成績の並び替え
2年生の数学の成績（1学期中間テスト）を点数の高い順に表示してください。欠席者は最後に表示。

**ヒント**: ORDER BYでNULLS LASTを使います

## JOIN編の演習

### 問題4: 全生徒の成績一覧
すべての生徒について、1学期中間テストの国語の成績を表示してください。未受験の生徒も「未受験」として表示。

**ヒント**: LEFT JOINとCOALESCEまたはCASE式を使います

### 問題5: クラス別成績表
各クラスの各科目の平均点を一覧表示してください（1学期中間テスト）。科目を横に並べて表示。

**ヒント**: 動的クロス集計（CASE式とMAX）を使います

### 問題6: 同点の生徒ペア
同じテストの同じ科目で同じ点数を取った生徒のペアを見つけてください。

**ヒント**: 自己結合を使います

## GROUP BY編の演習

### 問題7: 成績分布
各科目について、以下の点数帯の人数を集計してください（1学期中間テスト）。
- 90点以上
- 80-89点
- 70-79点
- 60-69点
- 60点未満

**ヒント**: CASE式とCOUNTを組み合わせます

### 問題8: 学年別集計
各学年の各科目の平均点、最高点、最低点を表示してください。さらに学年全体の総合平均も表示。

**ヒント**: GROUPING SETSまたはROLLUPを使います

### 問題9: 成績推移分析
特定の生徒（student_id = 1）の全テストにおける各科目の成績推移を表示してください。

**ヒント**: ピボット形式で表示するとわかりやすいです

### 問題10: 総合ランキング
1学期中間テストの5教科合計点で、上位10名を表示してください。同点の場合は同順位として表示。

**ヒント**: ウィンドウ関数のRANK()を使います

## 応用問題

### 問題11: 欠席と成績の関係
欠席回数別に平均点を集計し、欠席が成績に与える影響を分析してください。

### 問題12: クラス間の成績差
各テストにおいて、クラス間の平均点の差が最も大きい科目を見つけてください。

### 問題13: 成績向上者
前回のテストと比較して、最も成績が向上した生徒を各科目で見つけてください。

## 解答の確認方法

1. まず自分の答えが正しい結果を返すか確認
2. パフォーマンスを考慮しているか検討
3. より簡潔に書けないか考える
4. 解答例と比較して、別のアプローチを学ぶ

解答例は `solutions/` ディレクトリに用意されています。